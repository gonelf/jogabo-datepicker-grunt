/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

//! moment.js
//! version : 2.8.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

!function(){var t,e,i;!function(n){function s(t,e){return S.call(t,e)}function o(t,e){var i,n,s,o,r,a,h,u,c,l,p,d=e&&e.split("/"),f=m.map,_=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),t=t.split("/"),r=t.length-1,m.nodeIdCompat&&O.test(t[r])&&(t[r]=t[r].replace(O,"")),t=d.concat(t),c=0;c<t.length;c+=1)if(p=t[c],"."===p)t.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||_)&&f){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),d)for(l=d.length;l>0;l-=1)if(s=f[d.slice(0,l).join("/")],s&&(s=s[n])){o=s,a=c;break}if(o)break;!h&&_&&_[n]&&(h=_[n],u=c)}!o&&h&&(o=h,a=u),o&&(i.splice(0,a,o),t=i.join("/"))}return t}function r(t,e){return function(){return d.apply(n,w.call(arguments,0).concat([t,e]))}}function a(t){return function(e){return o(e,t)}}function h(t){return function(e){y[t]=e}}function u(t){if(s(g,t)){var e=g[t];delete g[t],v[t]=!0,p.apply(n,e)}if(!s(y,t)&&!s(v,t))throw new Error("No "+t);return y[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t){return function(){return m&&m.config&&m.config[t]||{}}}var p,d,f,_,y={},g={},m={},v={},S=Object.prototype.hasOwnProperty,w=[].slice,O=/\.js$/;f=function(t,e){var i,n=c(t),s=n[0];return t=n[1],s&&(s=o(s,e),i=u(s)),s?t=i&&i.normalize?i.normalize(t,a(e)):o(t,e):(t=o(t,e),n=c(t),s=n[0],t=n[1],s&&(i=u(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:i}},_={require:function(t){return r(t)},exports:function(t){var e=y[t];return"undefined"!=typeof e?e:y[t]={}},module:function(t){return{id:t,uri:"",exports:y[t],config:l(t)}}},p=function(t,e,i,o){var a,c,l,p,d,m,S=[],w=typeof i;if(o=o||t,"undefined"===w||"function"===w){for(e=!e.length&&i.length?["require","exports","module"]:e,d=0;d<e.length;d+=1)if(p=f(e[d],o),c=p.f,"require"===c)S[d]=_.require(t);else if("exports"===c)S[d]=_.exports(t),m=!0;else if("module"===c)a=S[d]=_.module(t);else if(s(y,c)||s(g,c)||s(v,c))S[d]=u(c);else{if(!p.p)throw new Error(t+" missing "+c);p.p.load(p.n,r(o,!0),h(c),{}),S[d]=y[c]}l=i?i.apply(y[t],S):void 0,t&&(a&&a.exports!==n&&a.exports!==y[t]?y[t]=a.exports:l===n&&m||(y[t]=l))}else t&&(y[t]=i)},t=e=d=function(t,e,i,s,o){if("string"==typeof t)return _[t]?_[t](e):u(f(t,e).f);if(!t.splice){if(m=t,m.deps&&d(m.deps,m.callback),!e)return;e.splice?(t=e,e=i,i=null):t=n}return e=e||function(){},"function"==typeof i&&(i=s,s=o),s?p(n,t,e,i):setTimeout(function(){p(n,t,e,i)},4),d},d.config=function(t){return d(t)},t._defined=y,i=function(t,e,i){e.splice||(i=e,e=[]),s(y,t)||s(g,t)||(g[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("famous/core/Entity",["require","exports","module"],function(t,e,i){function n(t){return a[t]}function s(t,e){a[t]=e}function o(t){var e=a.length;return s(e,t),e}function r(t){s(t,null)}var a=[];i.exports={register:o,unregister:r,get:n,set:s}}),i("famous/core/Transform",["require","exports","module"],function(t,e,i){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},r.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},r.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],n=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],s=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.thenMove(e,[i,n,s])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},r.scale=function(t,e,i){return void 0===i&&(i=1),void 0===e&&(e=t),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var n=Math.cos(t),s=Math.sin(t),o=Math.cos(e),r=Math.sin(e),a=Math.cos(i),h=Math.sin(i),u=[o*a,n*h+s*r*a,s*h-n*r*a,0,-o*h,n*a-s*r*h,s*a+n*r*h,0,r,-s*o,n*o,0,0,0,0,1];return u},r.rotateAxis=function(t,e){var i=Math.sin(e),n=Math.cos(e),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,h=t[1]*t[1]*s,u=t[1]*t[2]*s,c=t[2]*t[2]*s,l=t[0]*i,p=t[1]*i,d=t[2]*i,f=[o+n,r+d,a-p,0,r-d,h+n,u+l,0,a+p,u-l,c+n,0,0,0,0,1];return f},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),n=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),s=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.thenMove(e,[i,n,s])},r.skew=function(t,e,i){return[1,Math.tan(e),0,0,Math.tan(i),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},r.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},r.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],o=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],h=t[0]*t[6]-t[2]*t[4],u=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*i+t[2]*n,l=1/c,p=[l*e,-l*s,l*a,0,-l*i,l*o,-l*h,0,l*n,-l*r,l*u,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=o(e[0]),a=s(e),h=[e[0]+i*a,e[1],e[2]],u=2/n(h);if(u>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];c[0]=1-u*h[0]*h[0],c[5]=1-u*h[1]*h[1],c[10]=1-u*h[2]*h[2],c[1]=-u*h[0]*h[1],c[2]=-u*h[0]*h[2],c[6]=-u*h[1]*h[2],c[4]=c[1],c[8]=c[2],c[9]=c[6];var l=r.multiply(c,t),p=[l[5],l[6]],d=o(p[0]),f=s(p),_=[p[0]+d*f,p[1]],y=2/n(_),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-y*_[0]*_[0],g[10]=1-y*_[1]*_[1],g[6]=-y*_[0]*_[1],g[9]=g[6];var m=r.multiply(g,c),v=r.multiply(m,t),S=r.scale(v[0]<0?-1:1,v[5]<0?-1:1,v[10]<0?-1:1);v=r.multiply(v,S),m=r.multiply(S,m);var w={};return w.translate=r.getTranslate(t),w.rotate=[Math.atan2(-m[6],m[10]),Math.asin(m[2]),Math.atan2(-m[1],m[0])],w.rotate[0]||(w.rotate[0]=0,w.rotate[2]=Math.atan2(m[4],m[5])),w.scale=[v[0],v[5],v[10]],w.skew=[Math.atan2(v[9],w.scale[2]),Math.atan2(v[8],w.scale[2]),Math.atan2(v[4],w.scale[0])],Math.abs(w.rotate[0])+Math.abs(w.rotate[2])>1.5*Math.PI&&(w.rotate[1]=Math.PI-w.rotate[1],w.rotate[1]>Math.PI&&(w.rotate[1]-=2*Math.PI),w.rotate[1]<-Math.PI&&(w.rotate[1]+=2*Math.PI),w.rotate[0]<0?w.rotate[0]+=Math.PI:w.rotate[0]-=Math.PI,w.rotate[2]<0?w.rotate[2]+=Math.PI:w.rotate[2]-=Math.PI),w},r.average=function(t,e,i){i=void 0===i?.5:i;for(var n=r.interpret(t),s=r.interpret(e),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-i)*n.translate[a]+i*s.translate[a],o.rotate[a]=(1-i)*n.rotate[a]+i*s.rotate[a],o.scale[a]=(1-i)*n.scale[a]+i*s.scale[a],o.skew[a]=(1-i)*n.skew[a]+i*s.skew[a];return r.build(o)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(n,i),e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]},r.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=r}),i("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function n(){this.result={}}function s(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var o=t("./Transform");n._instance=new n,n.parse=function(t,e){return n._instance.parse(t,e)},n.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,o.identity),this.result},n.prototype.reset=function(){this.result={}};var r=[0,0];n.prototype._parseSpec=function(t,e,i){var n,a,h,u,c,l,p;if("number"==typeof t){if(n=t,h=e.transform,l=e.align||r,e.size&&l&&(l[0]||l[1])){var d=[l[0]*e.size[0],l[1]*e.size[1],0];h=o.thenMove(h,s(d,i))}this.result[n]={transform:h,opacity:e.opacity,origin:e.origin||r,align:e.align||r,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var f=0;f<t.length;f++)this._parseSpec(t[f],e,i);else{a=t.target,h=e.transform,u=e.opacity,c=e.origin,l=e.align,p=e.size;var _=i;if(void 0!==t.opacity&&(u=e.opacity*t.opacity),t.transform&&(h=o.multiply(e.transform,t.transform)),t.origin&&(c=t.origin,_=e.transform),t.align&&(l=t.align),t.size||t.proportions){var y=p;p=[p[0],p[1]],t.size&&(void 0!==t.size[0]&&(p[0]=t.size[0]),void 0!==t.size[1]&&(p[1]=t.size[1])),t.proportions&&(void 0!==t.proportions[0]&&(p[0]=p[0]*t.proportions[0]),void 0!==t.proportions[1]&&(p[1]=p[1]*t.proportions[1])),y&&(l&&(l[0]||l[1])&&(h=o.thenMove(h,s([l[0]*y[0],l[1]*y[1],0],i))),c&&(c[0]||c[1])&&(h=o.moveThen([-c[0]*p[0],-c[1]*p[1],0],h))),_=e.transform,c=null,l=null}this._parseSpec(a,{transform:h,opacity:u,origin:c,align:l,size:p},_)}}},i.exports=n}),i("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function n(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function s(t,e,i){for(var n=r.parse(t,e),a=Object.keys(n),h=0;h<a.length;h++){var u=a[h],c=o.get(u),l=n[u];l.allocator=e.allocator;var p=c.commit(l);p?s(p,e,i):i[u]=l}}var o=t("./Entity"),r=t("./SpecParser");n.prototype.add=function(t){var e=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},n.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},n.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof n?t:this},n.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},n.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var n=e[i];if(void 0===this._resultCache[n]){var r=o.get(n);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},s(this.render(),t,this._resultCache)},n.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=n}),i("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function n(){this.listeners={},this._owner=this}n.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var n=0;n<i.length;n++)i[n].call(this._owner,e);return this},n.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var i=this.listeners[t].indexOf(e);return 0>i&&this.listeners[t].push(e),this},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=function(t,e){var i=this.listeners[t];if(void 0!==i){var n=i.indexOf(e);n>=0&&i.splice(n,1)}return this},n.prototype.bindThis=function(t){this._owner=t},i.exports=n}),i("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function n(){s.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var s=t("./EventEmitter");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},n.setOutputHandler=function(t,e){e instanceof n&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},n.prototype.emit=function(t,e){s.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},n.prototype.trigger=n.prototype.emit,n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},n.prototype.on=function(t){if(s.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var i=0;i<this.upstream.length;i++)this.upstream[i].on(t,e)}return this},n.prototype.addListener=n.prototype.on,n.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},n.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=n}),i("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.firstChild);this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},n.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},i.exports=n}),i("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var n={};n.Direction={X:0,Y:1,Z:2},n.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},n.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},n.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},n.clone=function(t){var e;if("object"==typeof t){e=t instanceof Array?[]:{};for(var i in t)if("object"==typeof t[i]&&null!==t[i])if(t[i]instanceof Array){e[i]=new Array(t[i].length);for(var s=0;s<t[i].length;s++)e[i][s]=n.clone(t[i][s])}else e[i]=n.clone(t[i]);else e[i]=t[i]}else e=t;return e},i.exports=n}),i("famous/transitions/MultipleTransition",["require","exports","module","../utilities/Utility"],function(t,e,i){function n(t){this.method=t,this._instances=[],this.state=[]}var s=t("../utilities/Utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,e,i){for(var n=s.after(t.length,i),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],e,n)},n.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=n}),i("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,e,i){return(1-i)*t+i*e}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=n.getCurve(i.curve)),i}function a(t,e,i,n,s){var o,r=1e-7,a=(i(s)-i(s-r))/r;if(t instanceof Array){o=[];for(var h=0;h<t.length;h++)o[h]="number"==typeof t[h]?a*(t[h]-e[h])/n:0}else o=a*(t-e)/n;return o}function h(t,e,i){var n;if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)n[o]="number"==typeof t[o]?s(t[o],e[o],i):t[o]}else n=s(t,e,i);return n}n.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:n.Curves.linear,duration:500,speed:0};var u={};n.registerCurve=function(t,e){return u[t]?!1:(u[t]=e,!0)},n.unregisterCurve=function(t){return u[t]?(delete u[t],!0):!1},n.getCurve=function(t){var e=u[t];if(void 0!==e)return e;throw new Error("curve not registered")},n.getCurves=function(){return u},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=o(this.get()),e=r(e,this.options),e.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var a in n)s+=(t[a]-n[a])*(t[a]-n[a]);e.duration=Math.sqrt(s)/e.speed}else e.duration=Math.abs(t-n)/e.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},n.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=o(t),this.velocity=o(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=h(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",n.Curves.linear),n.registerCurve("easeIn",n.Curves.easeIn),n.registerCurve("easeOut",n.Curves.easeOut),n.registerCurve("easeInOut",n.Curves.easeInOut),n.registerCurve("easeOutBounce",n.Curves.easeOutBounce),n.registerCurve("spring",n.Curves.spring),n.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=n}),i("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(e=n.method,"string"==typeof e&&(e=a[e])):e=r,this._currentMethod!==e&&(this._engineInstance=!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?new e:new o(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(i,n,s.bind(this))}var o=t("./MultipleTransition"),r=t("./TweenTransition"),a={};n.register=function(t){var e=!0;for(var i in t)n.registerMethod(i,t[i])||(e=!1);return e},n.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var n=[t,e];return this.actionQueue.push(n),this.callbackQueue.push(i),this.currentAction||s.call(this),this},n.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,e){this.set(this.get(),{duration:t,curve:function(){return 0}},e)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){return this.set(this.get())},i.exports=n}),i("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","../transitions/Transitionable"],function(t,e,i){function n(t){return[t.clientWidth,t.clientHeight]}function s(t){this.container=t,this._allocator=new a(t),this._node=new o,this._eventOutput=new r,this._size=n(this.container),this._perspectiveState=new u(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:h.identity,opacity:1,origin:c,align:c,size:this._size},this._eventOutput.on("resize",function(){this.setSize(n(this.container))}.bind(this))}var o=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),h=t("./Transform"),u=t("../transitions/Transitionable"),c=[0,0],l=!("perspective"in document.documentElement.style),p=l?function(t,e){t.style.webkitPerspective=e?e.toFixed()+"px":""}:function(t,e){t.style.perspective=e?e.toFixed()+"px":""};s.prototype.getAllocator=function(){return this._allocator},s.prototype.add=function(t){return this._node.add(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=n(this.container)),this._size[0]=t[0],this._size[1]=t[1]},s.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(p(this.container,e),this._perspective=e),this._node.commit(this._nodeContext)},s.prototype.getPerspective=function(){return this._perspectiveState.get()},s.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},s.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},s.prototype.on=function(t,e){return this._eventOutput.on(t,e)},s.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},s.prototype.pipe=function(t){return this._eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=s}),i("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function n(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./EventHandler");n.patch=function(t){for(var e=new n(t),i=1;i<arguments.length;i++)e.patch(arguments[i]);return t},n.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)n in t&&i[n]&&i[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(i[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,i[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var e=new n(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},n.prototype.get=function(t){return t?this._value[t]:this._value},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function n(){w.runLoop?(l.step(),window.requestAnimationFrame(n)):m=!1}function s(){for(var t=0;t<p.length;t++)p[t].emit("resize");S.emit("resize")}function o(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var r,a,h=t("./Context"),u=t("./EventHandler"),c=t("./OptionsManager"),l={},p=[],d=[],f=0,_=0,y=[],g=Date.now(),m=!0,v={},S=new u,w={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},O=new c(w),M=10;l.step=function(){f++,_=f;var t=Date.now();if(!(a&&a>t-g)){var e=0;if(r=t-g,g=t,S.emit("prerender"),d.length){for(e=0;e<d[0].length;e++)d[0][e].call(this,f);d.splice(0,1)}for(;y.length&&Date.now()-t<M;)y.shift().call(this);for(e=0;e<p.length;e++)p[e].update();S.emit("postrender")}},window.requestAnimationFrame(n),window.addEventListener("resize",s,!1),s();var x=!1;l.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(l):S.pipe(t)},l.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(l):S.unpipe(t)},l.on=function(t,e){return t in v||(v[t]=S.emit.bind(S,t),document.body?document.body.addEventListener(t,v[t]):l.nextTick(function(t,e){document.body.addEventListener(t,e)}.bind(this,t,v[t]))),S.on(t,e)},l.emit=function(t,e){return S.emit(t,e)},l.removeListener=function(t,e){return S.removeListener(t,e)},l.getFPS=function(){return 1e3/r},l.setFPSCap=function(t){a=Math.floor(1e3/t)},l.getOptions=function(t){return O.getOptions(t)},l.setOptions=function(){return O.setOptions.apply(O,arguments)},l.createContext=function(t){!x&&w.appMode&&l.nextTick(o);var e=!1;t||(t=document.createElement(w.containerType),t.classList.add(w.containerClass),e=!0);var i=new h(t);return l.registerContext(i),e&&l.nextTick(function(t,e){document.body.appendChild(e),t.emit("resize")}.bind(this,i,t)),i},l.registerContext=function(t){return p.push(t),t},l.getContexts=function(){return p},l.deregisterContext=function(t){var e=p.indexOf(t);e>=0&&p.splice(e,1)},l.nextTick=function(t){function e(e){var i=e+1;_!==i&&(_=i),t()}var i=_-f;d[i]||(d[i]=[]),d[i].push(e)},l.defer=function(t){y.push(t)},O.on("change",function(t){"fpsCap"===t.id?l.setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,window.requestAnimationFrame(n))}),i.exports=l}),i("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","../core/Transform","../utilities/Utility"],function(t,e,i){function n(t){this._final=a.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=new r(this._finalTranslate),this.rotate=new r(this._finalRotate),this.skew=new r(this._finalSkew),this.scale=new r(this._finalScale),t&&this.set(t)}function s(){return a.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}function o(){return a.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}var r=t("./Transitionable"),a=t("../core/Transform"),h=t("../utilities/Utility");n.prototype.setTranslate=function(t,e,i){return this._finalTranslate=t,this._final=o.call(this),this.translate.set(t,e,i),this},n.prototype.setScale=function(t,e,i){return this._finalScale=t,this._final=o.call(this),this.scale.set(t,e,i),this},n.prototype.setRotate=function(t,e,i){return this._finalRotate=t,this._final=o.call(this),this.rotate.set(t,e,i),this},n.prototype.setSkew=function(t,e,i){return this._finalSkew=t,this._final=o.call(this),this.skew.set(t,e,i),this},n.prototype.set=function(t,e,i){var n=a.interpret(t);this._finalTranslate=n.translate,this._finalRotate=n.rotate,this._finalSkew=n.skew,this._finalScale=n.scale,this._final=t;var s=i?h.after(4,i):null;return this.translate.set(n.translate,e,s),this.rotate.set(n.rotate,e,s),this.skew.set(n.skew,e,s),this.scale.set(n.scale,e,s),this},n.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)
},n.prototype.get=function(){return this.isActive()?s.call(this):this._final},n.prototype.getFinal=function(){return this._final},n.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},n.prototype.halt=function(){return this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt(),this._final=this.get(),this._finalTranslate=this.translate.get(),this._finalRotate=this.rotate.get(),this._finalSkew=this.skew.get(),this._finalScale=this.scale.get(),this},i.exports=n}),i("famous/core/Modifier",["require","exports","module","./Transform","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,i){function n(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:o.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size),t.proportions&&this.proportionsFrom(t.proportions))}function s(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}var o=t("./Transform"),r=t("../transitions/Transitionable"),a=t("../transitions/TransitionableTransform");n.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},n.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},n.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},n.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},n.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},n.prototype.proportionsFrom=function(t){return t instanceof Function?this._proportionGetter=t:t instanceof Object&&t.get?this._proportionGetter=t.get.bind(t):(this._proportionGetter=null,this._output.proportions=t),this},n.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},n.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},n.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},n.prototype.setAlign=function(t,e,i){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new r(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,i),this):this.alignFrom(t)},n.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},n.prototype.setProportions=function(t,e,i){return t&&(e||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new r(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(t,e,i),this):this.proportionsFrom(t)},n.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},n.prototype.getTransform=function(){return this._transformGetter()},n.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},n.prototype.getOpacity=function(){return this._opacityGetter()},n.prototype.getOrigin=function(){return this._originGetter()},n.prototype.getAlign=function(){return this._alignGetter()},n.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},n.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},n.prototype.modify=function(t){return s.call(this),this._output.target=t,this._output},i.exports=n}),i("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function n(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new c,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=u.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function s(t){for(var e in this._eventOutput.listeners)t.addEventListener(e,this.eventForwarder)}function o(t){for(var e in this._eventOutput.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){t[12]=Math.round(t[12]*d)/d,t[13]=Math.round(t[13]*d)/d;for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function a(t){return 100*t[0]+"% "+100*t[1]+"%"}function h(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var u=t("./Entity"),c=t("./EventHandler"),l=t("./Transform"),p=!("transform"in document.documentElement.style),d=window.devicePixelRatio||1;n.prototype.on=function(t,e){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,e)},n.prototype.removeListener=function(t,e){this._eventOutput.removeListener(t,e)},n.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this._eventOutput.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},n.prototype.pipe=function(t){return this._eventOutput.pipe(t)},n.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},n.prototype.render=function(){return this.id};var f;f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=r(e)}:p?function(t,e){t.style.webkitTransform=r(e)}:function(t,e){t.style.transform=r(e)};var _=p?function(t,e){t.style.webkitTransformOrigin=a(e)}:function(t,e){t.style.transformOrigin=a(e)},y=p?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};n.prototype.commit=function(t){var e=this._element;if(e){{var i=t.transform,n=t.opacity,s=t.origin;t.size}if(!i&&this._matrix)return this._matrix=null,this._opacity=0,void y(e);if(h(this._origin,s)&&(this._originDirty=!0),l.notEquals(this._matrix,i)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==n&&(this._opacity=n,e.style.opacity=n>=1?"0.999999":n),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(s?(this._origin||(this._origin=[0,0]),this._origin[0]=s[0],this._origin[1]=s[1]):this._origin=null,_(e,this._origin),this._originDirty=!1),i||(i=l.identity),this._matrix=i;var o=this._size?l.thenMove(i,[-this._size[0]*s[0],-this._size[1]*s[1],0]):i;f(e,o),this._transformDirty=!1}}},n.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},n.prototype.attach=function(t){this._element=t,s.call(this,t)},n.prototype.detach=function(){var t=this._element;return t&&(o.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},i.exports=n}),i("famous/core/Surface",["require","exports","module","./ElementOutput"],function(t,e,i){function n(t){c.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function s(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function o(t){for(var e in this.properties)t.style[e]=this.properties[e]}function r(t){for(var e in this.properties)t.style[e]=""}function a(t){for(var e in this.attributes)t.setAttribute(e,this.attributes[e])}function h(t){for(var e in this.attributes)t.removeAttribute(e)}function u(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var c=t("./ElementOutput");n.prototype=Object.create(c.prototype),n.prototype.constructor=n,n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.setAttributes=function(t){for(var e in t){if("style"===e)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[e]=t[e]}this._attributesDirty=!0},n.prototype.getAttributes=function(){return this.attributes},n.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];return this._stylesDirty=!0,this},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0),this},n.prototype.removeClass=function(t){var e=this.classList.indexOf(t);return e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0),this},n.prototype.toggleClass=function(t){var e=this.classList.indexOf(t);return e>=0?this.removeClass(t):this.addClass(t),this},n.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e]);return this},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0),this},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){return t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.attributes&&this.setAttributes(t.attributes),t.content&&this.setContent(t.content),this},n.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",this.attach(e),this._opacity=null,this._currentTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},n.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var e=this._currentTarget,i=t.size;if(this._classesDirty){s.call(this,e);for(var n=this.getClassList(),r=0;r<n.length;r++)e.classList.add(n[r]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(o.call(this,e),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(a.call(this,e),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var h=t.size;if(i=[this.size[0],this.size[1]],void 0===i[0]&&(i[0]=h[0]),void 0===i[1]&&(i[1]=h[1]),i[0]===!0||i[1]===!0){if(i[0]===!0)if(this._trueSizeCheck||0===this._size[0]){var l=e.offsetWidth;this._size&&this._size[0]!==l&&(this._size[0]=l,this._sizeDirty=!0),i[0]=l}else this._size&&(i[0]=this._size[0]);if(i[1]===!0)if(this._trueSizeCheck||0===this._size[1]){var p=e.offsetHeight;this._size&&this._size[1]!==p&&(this._size[1]=p,this._sizeDirty=!0),i[1]=p}else this._size&&(i[1]=this._size[1]);this._trueSizeCheck=!1}}u(this._size,i)&&(this._size||(this._size=[0,0]),this._size[0]=i[0],this._size[1]=i[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(e.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",e.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(e),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),c.prototype.commit.call(this,t)},n.prototype.cleanup=function(t){var e=0,i=this._currentTarget;this._eventOutput.emit("recall"),this.recall(i),i.style.display="none",i.style.opacity="",i.style.width="",i.style.height="",r.call(this,i),h.call(this,i);var n=this.getClassList();for(s.call(this,i),e=0;e<n.length;e++)i.classList.remove(n[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);this.detach(i),this._currentTarget=null,t.deallocate(i)},n.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},n.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},n.prototype.getSize=function(){return this._size?this._size:this.size},n.prototype.setSize=function(t){return this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0,this},i.exports=n}),i("famous/surfaces/ContainerSurface",["require","exports","module","../core/Surface","../core/Context"],function(t,e,i){function n(t){s.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new o(this._container),this.setContent(this._container)}var s=t("../core/Surface"),o=t("../core/Context");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),s.prototype.render.apply(this,arguments)},n.prototype.deploy=function(){return this._shouldRecalculateSize=!0,s.prototype.deploy.apply(this,arguments)},n.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,e=s.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),e},i.exports=n}),i("famous/physics/PhysicsEngine",["require","exports","module","../core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=O(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function s(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,e,i){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),t.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:t,id:this._currAgentId,targets:e,source:i},s.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agentData[t]}function a(t){var e=r.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function h(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function u(t,e){var i=this._agentData[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function c(t){for(var e=0;e<this.options.constraintSteps;){for(var i=this._constraints.length-1;i>-1;i--)u.call(this,i,t);e++}}function l(t,e){t.integrateVelocity(e),this.options.velocityCap&&t.velocity.cap(this.options.velocityCap).put(t.velocity)}function p(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity(),this.options.angularVelocityCap&&t.angularVelocity.cap(this.options.angularVelocityCap).put(t.angularVelocity)}function d(t,e){t.integrateOrientation(e)}function f(t,e){t.integratePosition(e),t.emit(M.update,t)}function _(t){h.call(this,t),this.forEach(l,t),this.forEachBody(p,t),c.call(this,t),this.forEachBody(d,t),this.forEach(f,t)}function y(){var t=0,e=0;return this.forEach(function(i){e=i.getEnergy(),t+=e}),t}function g(){var t=0;for(var e in this._agentData)t+=this.getAgentEnergy(e);return t}var m=t("../core/EventHandler"),v=17,S=1e3/120,w=17,O=Date.now,M={start:"start",update:"update",end:"end"};n.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},n.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},n.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t.on("start",this.wake.bind(this)),t},n.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,i=e.indexOf(t);if(i>-1){for(var n in this._agentData)this._agentData.hasOwnProperty(n)&&this.detachFrom(this._agentData[n].id,t);e.splice(i,1)}0===this.getBodies().length&&(this._hasBodies=!1)},n.prototype.attach=function(t,e,i){if(this.wake(),t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],e,i);return n}return o.call(this,t,e,i)},n.prototype.attachTo=function(t,e){r.call(this,t).targets.push(e)},n.prototype.detach=function(t){var e=this.getAgent(t),i=s.call(this,e),n=i.indexOf(t);i.splice(n,1),delete this._agentData[t]},n.prototype.detachFrom=function(t,e){var i=r.call(this,t);if(i.source===e)this.detach(t);else{var n=i.targets,s=n.indexOf(e);s>-1&&n.splice(s,1)}},n.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return r.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getBodies=function(){return this._bodies},n.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},n.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),n=0,s=i.length;s>n;n++)t.call(this,i[n],e)},n.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var i=this.getBodies(),n=0,s=i.length;s>n;n++)t.call(this,i[n],e)},n.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},n.prototype.getAgentEnergy=function(t){var e=r.call(this,t);return e.agent.getEnergy(e.targets,e.source)},n.prototype.getEnergy=function(){return y.call(this)+g.call(this)},n.prototype.step=function(){if(!this.isSleeping()){var t=O(),e=t-this._prevTime;this._prevTime=t,S>e||(e>w&&(e=w),_.call(this,v),this.emit(M.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},n.prototype.isSleeping=function(){return this._isSleeping},n.prototype.isActive=function(){return!this._isSleeping},n.prototype.sleep=function(){this._isSleeping||(this.forEach(function(t){t.sleep()}),this.emit(M.end,this),this._isSleeping=!0)},n.prototype.wake=function(){this._isSleeping&&(this._prevTime=O(),this.emit(M.start,this),this._isSleeping=!1)},n.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},n.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new m),this._eventHandler.on(t,e)},i.exports=n}),i("famous/math/Vector",["require","exports","module"],function(t,e,i){function n(t,e,i){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function s(t,e,i){return this.x=t,this.y=e,this.z=i,this}function o(t){return s.call(this,t[0],t[1],t[2]||0)}function r(t){return s.call(this,t.x,t.y,t.z)}function a(t){return s.call(this,t,0,0)}var h=new n(0,0,0);n.prototype.add=function(t){return s.call(h,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return s.call(h,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return s.call(h,t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var e=this.x,i=this.y,n=this.z,o=t.x,r=t.y,a=t.z;return s.call(h,n*r-i*a,e*a-n*o,i*o-e*r)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.rotateX=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,e,i*o-n*r,i*r+n*o)},n.prototype.rotateY=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,n*r+e*o,i,n*o-e*r)},n.prototype.rotateZ=function(t){var e=this.x,i=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,e*o-i*r,e*r+i*o,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?r.call(h,this.mult(t/e)):s.call(h,t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?o.call(this,t):"number"==typeof t?a.call(this,t):r.call(this,t)},n.prototype.setXYZ=function(){return s.apply(this,arguments)},n.prototype.set1D=function(t){return a.call(this,t)},n.prototype.put=function(t){this===h?r.call(t,h):r.call(t,this)},n.prototype.clear=function(){return s.call(this,0,0,0)},n.prototype.cap=function u(u){if(1/0===u)return r.call(h,this);var t=this.norm();return t>u?r.call(h,this.mult(u/t)):r.call(h,this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.normalize().put(t),r(h,this.sub(this.project(t).mult(2)))},n.prototype.get=function(){return[this.x,this.y,this.z]},n.prototype.get1D=function(){return this.x},i.exports=n}),i("famous/physics/integrators/SymplecticEuler",["require","exports","module"],function(t,e,i){var n={};n.integrateVelocity=function(t,e){var i=t.velocity,n=t.inverseMass,s=t.force;s.isZero()||(i.add(s.mult(e*n)).put(i),s.clear())},n.integratePosition=function(t,e){var i=t.position,n=t.velocity;i.add(n.mult(e)).put(i)},n.integrateAngularMomentum=function(t,e){var i=t.angularMomentum,n=t.torque;n.isZero()||(i.add(n.mult(e)).put(i),n.clear())},n.integrateOrientation=function(t,e){var i=t.orientation,n=t.angularVelocity;n.isZero()||i.add(i.multiply(n).scalarMultiply(.5*e)).put(i)},i.exports=n}),i("famous/physics/bodies/Particle",["require","exports","module","../../math/Vector","../../core/Transform","../../core/EventHandler","../integrators/SymplecticEuler"],function(t,e,i){function n(t){t=t||{};var e=n.DEFAULT_OPTIONS;this.position=new o,this.velocity=new o,this.force=new o,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==t.mass?t.mass:e.mass,this.inverseMass=1/this.mass,this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.transform=r.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function s(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var o=t("../../math/Vector"),r=t("../../core/Transform"),a=t("../../core/EventHandler"),h=t("../integrators/SymplecticEuler");n.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var u={start:"start",update:"update",end:"end"},c=Date.now;n.prototype.isBody=!1,n.prototype.isActive=function(){return!this._isSleeping},n.prototype.sleep=function(){this._isSleeping||(this.emit(u.end,this),this._isSleeping=!0)},n.prototype.wake=function(){this._isSleeping&&(this.emit(u.start,this),this._isSleeping=!1,this._prevTime=c(),this._engine&&this._engine.wake())},n.prototype.setPosition=function(t){this.position.set(t)},n.prototype.setPosition1D=function(t){this.position.x=t},n.prototype.getPosition=function(){return this._engine.step(),this.position.get()},n.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},n.prototype.setVelocity=function(t){this.velocity.set(t),(0!==t[0]||0!==t[1]||0!==t[2])&&this.wake()},n.prototype.setVelocity1D=function(t){this.velocity.x=t,0!==t&&this.wake()},n.prototype.getVelocity=function(){return this.velocity.get()},n.prototype.setForce=function(t){this.force.set(t),this.wake()},n.prototype.getVelocity1D=function(){return this.velocity.x},n.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},n.prototype.getMass=function(){return this.mass},n.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},n.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},n.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},n.prototype.integrateVelocity=function(t){h.integrateVelocity(this,t)},n.prototype.integratePosition=function(t){h.integratePosition(this,t)},n.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},n.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},n.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.transform;return e[12]=t.x,e[13]=t.y,e[14]=t.z,e},n.prototype.modify=function(t){var e=this._spec.target;return e.transform=this.getTransform(),e.target=t,this._spec},n.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},i.exports=n}),i("famous/physics/forces/Force",["require","exports","module","../../math/Vector","../../core/EventHandler"],function(t,e,i){function n(t){this.force=new s(t),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput)}var s=t("../../math/Vector"),o=t("../../core/EventHandler");n.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},n.prototype.applyForce=function(t){for(var e=t.length;e--;)t[e].applyForce(this.force)},n.prototype.getEnergy=function(){return 0},i.exports=n}),i("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),s.call(this)}var s=t("./Force");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.DEFAULT_OPTIONS={strength:.01,forceFunction:n.FORCE_FUNCTIONS.LINEAR},n.prototype.applyForce=function(t){var e,i,n=this.options.strength,s=this.options.forceFunction,o=this.force;for(e=0;e<t.length;e++)i=t[e],s(i.velocity).mult(-n).put(o),i.applyForce(o)},n.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},i.exports=n}),i("famous/physics/forces/Spring",["require","exports","module","./Force","../../math/Vector"],function(t,e,i){function n(t){a.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new h(0,0,0),r.call(this)}function s(){var t=this.options;t.stiffness=Math.pow(2*u/t.period,2)}function o(){var t=this.options;t.damping=4*u*t.dampingRatio/t.period}function r(){s.call(this),o.call(this)}var a=t("./Force"),h=t("../../math/Vector");n.prototype=Object.create(a.prototype),n.prototype.constructor=n;var u=Math.PI,c=150;n.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,n=Math.max(Math.min(t,i),-i);return n/(1-n*n/(e*e))},HOOK:function(t){return t}},n.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:n.FORCE_FUNCTIONS.HOOK},n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof h&&(this.options.anchor=t.anchor.position),t.anchor instanceof h&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new h(t.anchor))),void 0!==t.period&&(t.period<c&&(t.period=c,console.warn("The period of a SpringTransition is capped at "+c+" ms. Use a SnapTransition for faster transitions")),this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),r.call(this),a.prototype.setOptions.call(this,t)},n.prototype.applyForce=function(t,e){var i,n,s,o,r,a,h=this.force,u=this.disp,c=this.options,l=c.stiffness,p=c.damping,d=c.length,f=c.maxLength,_=c.anchor||e.position,y=c.forceFunction;for(i=0;i<t.length;i++){if(n=t[i],s=n.position,o=n.velocity,_.sub(s).put(u),r=u.norm()-d,0===r)return;a=n.mass,l*=a,p*=a,u.normalize(l*y(r,f)).put(h),p&&(e?h.add(o.sub(e.velocity).mult(-p)).put(h):h.add(o.mult(-p)).put(h)),n.applyForce(h),e&&e.applyForce(h.mult(-1))}},n.prototype.getEnergy=function(t,e){for(var i=this.options,n=i.length,s=e?e.position:i.anchor,o=i.stiffness,r=0,a=0;a<t.length;a++){var h=t[a],u=s.sub(h.position).norm()-n;r+=.5*o*u*u}return r},i.exports=n}),i("famous/core/ViewSequence",["require","exports","module"],function(t,e,i){function n(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),void 0!==t.trackSize&&(this._.trackSize=t.trackSize),this._previousNode=null,this._nextNode=null}n.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},n.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return 0>e||e>=this.array.length?null:this.array[e]},n.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},n.Backing.prototype.getSize=function(t){return this.cumulativeSizes[t]},n.Backing.prototype.calculateSize=function(t){t=t||this.array.length;for(var e=[0,0],i=0;t>i;i++){var n=this.array[i].getSize();if(!n)return void 0;void 0!==e[0]&&(void 0===n[0]?e[0]=void 0:e[0]+=n[0]),void 0!==e[1]&&(void 0===n[1]?e[1]=void 0:e[1]+=n[1]),this.cumulativeSizes[i+1]=e.slice()
}return this.sizeDirty=!1,e},n.Backing.prototype.reindex=function(t,e,i){if(this.array[0]){for(var n=0,s=this.firstIndex,o=i-e,r=this.firstNode;t-1>s;)r=r.getNext(),s++;var a=r;for(n=0;e>n;n++)r=r.getNext(),r&&(r._previousNode=a);var h=r?r.getNext():null;for(a._nextNode=null,r=a,n=0;i>n;n++)r=r.getNext();if(s+=i,r!==h&&(r._nextNode=h,h&&(h._previousNode=r)),h)for(r=h,s++;r&&s<this.array.length+this.firstIndex;)r._nextNode?r.index+=o:r.index=s,r=r.getNext(),s++;this.trackSize&&(this.sizeDirty=!0)}},n.prototype.getPrevious=function(){var t=this._.array.length;return t?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+t-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},n.prototype.getNext=function(){var t=this._.array.length;return t?this.index===this._.firstIndex+t-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode},n.prototype.indexOf=function(t){return this._.array.indexOf(t)},n.prototype.getIndex=function(){return this.index},n.prototype.toString=function(){return""+this.index},n.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},n.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},n.prototype.splice=function(t,e){var i=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(i)),this._.reindex(t,e,i.length)},n.prototype.swap=function(t){var e=t.get(),i=this.get();this._.setValue(this.index,e),this._.setValue(t.index,i);var n=this._previousNode,s=this._nextNode,o=this.index,r=t._previousNode,a=t._nextNode,h=t.index;this.index=h,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=o,t._previousNode=n===t?this:n,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=s===t?this:s,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t),this._.trackSize&&(this._.sizeDirty=!0)},n.prototype.get=function(){return this._.getValue(this.index)},n.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},n.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=n}),i("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,e,i){function n(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var s=t("./Context"),o=t("./Transform"),r=t("./Surface");n.SIZE_ZERO=[0,0],n.prototype=Object.create(r.prototype),n.prototype.elementType="div",n.prototype.elementClass="famous-group",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return r.prototype.render.call(this)},n.prototype.deploy=function(t){this.context.migrate(t)},n.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},n.prototype.commit=function(t){var e=t.transform,i=t.origin,s=t.opacity,a=t.size,h=r.prototype.commit.call(this,{allocator:t.allocator,transform:o.thenMove(e,[-i[0]*a[0],-i[1]*a[1],0]),opacity:s,origin:i,size:n.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:o.translate(-i[0]*a[0],-i[1]*a[1],0),origin:i,size:a}),h},i.exports=n}),i("famous/views/Scroller",["require","exports","module","../core/Entity","../core/Group","../core/OptionsManager","../core/Transform","../utilities/Utility","../core/ViewSequence","../core/EventHandler"],function(t,e,i){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new u,this.group.add({render:a.bind(this)}),this._entityId=h.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new f,this._eventOutput=new f,f.setInputHandler(this,this._eventInput),f.setOutputHandler(this,this._eventOutput)}function s(t){t||(t=this._contextSize);var e=this.options.direction;return void 0===t[e]?this._contextSize[e]:t[e]}function o(t,e,i){var n=t.getSize?t.getSize():this._contextSize,o=this._outputFunction(e);return i.push({transform:o,target:t.render()}),s.call(this,n)}function r(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?s.call(this,this.getCumulativeSize()):s.call(this,this._contextSize)}function a(){for(var t=null,e=this._position,i=[],n=-this._positionOffset,a=r.call(this),h=this._node;h&&n-e<a+this.options.margin;)n+=o.call(this,h,n,i),h=h.getNext?h.getNext():null;var u=this._node,c=s.call(this,u.getSize());if(a>n){for(;u&&a>c;)u=u.getPrevious(),u&&(c+=s.call(this,u.getSize()));for(u=this._node;u&&a>c;)u=u.getNext(),u&&(c+=s.call(this,u.getSize()))}for(!h&&a-_>n-e?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:n-a})):!this._node.getPrevious()&&-_>e?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),h=this._node&&this._node.getPrevious?this._node.getPrevious():null,n=-this._positionOffset,h&&(t=h.getSize?h.getSize():this._contextSize,n-=s.call(this,t));h&&n-e>-(a+this.options.margin);)o.call(this,h,n,i),h=h.getPrevious?h.getPrevious():null,h&&(t=h.getSize?h.getSize():this._contextSize,n-=s.call(this,t));return i}var h=t("../core/Entity"),u=t("../core/Group"),c=t("../core/OptionsManager"),l=t("../core/Transform"),p=t("../utilities/Utility"),d=t("../core/ViewSequence"),f=t("../core/EventHandler");n.DEFAULT_OPTIONS={direction:p.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var _=0;n.prototype.getCumulativeSize=function(t){return void 0===t&&(t=this._node._.cumulativeSizes.length-1),this._node._.getSize(t)},n.prototype.setOptions=function(t){t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(t)},n.prototype.onEdge=function(){return this._onEdge},n.prototype.outputFrom=function(t,e){t||(t=function(t){return this.options.direction===p.Direction.X?l.translate(t,0):l.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return l.inverse(t(-e))}},n.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new d({array:t})),this._node=t,this._positionOffset=0},n.prototype.getSize=function(t){return t?this._contextSize:this._size},n.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=s[0],this._contextSize[1]=s[1],this.options.direction===p.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var o=this._masterOutputFunction(-this._position);return{transform:l.multiply(e,o),size:s,opacity:i,origin:n,target:this.group.render()}},i.exports=n}),i("famous/inputs/GenericSync",["require","exports","module","../core/EventHandler"],function(t,e,i){function n(t,e){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function s(t,e){r[t]&&(this._syncs[t]=new r[t](e),this.pipeSync(t))}var o=t("../core/EventHandler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2;var r={};n.register=function(t){for(var e in t){if(r[e]){if(r[e]===t[e])return;throw new Error("this key is registered to a different sync class")}r[e]=t[e]}},n.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},n.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},n.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},n.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)s.call(this,t[e]);else if(t instanceof Object)for(var i in t)s.call(this,i,t[i])},i.exports=n}),i("famous/inputs/ScrollSync",["require","exports","module","../core/EventHandler","../core/Engine","../core/OptionsManager"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",o.bind(this)),this._eventInput.on("wheel",o.bind(this)),this._inProgress=!1,this._loopBound=!1}function s(){if(this._inProgress&&c()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,e=this._payload;e.position=this._position,e.velocity=t,e.slip=!0,this._eventOutput.emit("end",e)}}function o(t){this.options.preventDefault&&t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,y=this._payload,y.slip=!0,y.position=this._position,y.clientX=t.clientX,y.clientY=t.clientY,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this._eventOutput.emit("start",y),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var e=c(),i=this._prevTime||e,o=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,r=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(o*=this.options.lineHeight,r*=this.options.lineHeight),this.options.rails&&(Math.abs(o)>Math.abs(r)?r=0:o=0);var h,l,p=Math.max(e-i,u),d=o/p,f=r/p,_=this.options.scale;this.options.direction===n.DIRECTION_X?(l=_*o,h=_*d,this._position+=l):this.options.direction===n.DIRECTION_Y?(l=_*r,h=_*f,this._position+=l):(l=[_*o,_*r],h=[_*d,_*f],this._position[0]+=l[0],this._position[1]+=l[1]);var y=this._payload;y.delta=l,y.velocity=h,y.position=this._position,y.slip=!0,this._eventOutput.emit("update",y),this._prevTime=e,this._prevVel=h}var r=t("../core/EventHandler"),a=t("../core/Engine"),h=t("../core/OptionsManager");n.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},n.DIRECTION_X=0,n.DIRECTION_Y=1;var u=8,c=Date.now;n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.exports=n}),i("famous/inputs/TouchTracker",["require","exports","module","../core/EventHandler"],function(t,e,i){function n(t,e,i){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:c(),count:e.touches.length,history:i}}function s(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=n(i,t,null);this.eventOutput.emit("trackstart",s),this.selective||this.touchHistory[i.identifier]||this.track(s)}}}function o(t){if(!(t.touches.length>this.touchLimit))for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=this.touchHistory[i.identifier];if(s){var o=n(i,t,s);this.touchHistory[i.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function r(t){if(this.isTouched){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s=this.touchHistory[i.identifier];if(s){var o=n(i,t,s);this.eventOutput.emit("trackend",o),delete this.touchHistory[i.identifier]}}this.isTouched=!1}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function h(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new u,this.eventOutput=new u,u.setInputHandler(this,this.eventInput),u.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",s.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this)),this.isTouched=!1}var u=t("../core/EventHandler"),c=Date.now;h.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},i.exports=h}),i("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","../core/EventHandler","../core/OptionsManager"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this.setOptions(t),this._eventOutput=new h,this._touchTracker=new a({touchLimit:this.options.touchLimit}),h.setOutputHandler(this,this._eventOutput),h.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",s.bind(this)),this._touchTracker.on("trackmove",o.bind(this)),this._touchTracker.on("trackend",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function s(t){var e,i;void 0!==this.options.direction?(this._position=0,e=0,i=0):(this._position=[0,0],e=[0,0],i=[0,0]);var n=this._payload;n.delta=i,n.position=this._position,n.velocity=e,n.clientX=t.x,n.clientY=t.y,n.count=t.count,n.touch=t.identifier,this._eventOutput.emit("start",n)}function o(t){var e=t.history,i=e[e.length-1],s=e[e.length-2],o=e[e.length-this.options.velocitySampleLength]?e[e.length-this.options.velocitySampleLength]:e[e.length-2],r=o.timestamp,a=i.timestamp,h=i.x-s.x,u=i.y-s.y,l=i.x-o.x,p=i.y-o.y;this.options.rails&&(Math.abs(h)>Math.abs(u)?u=0:h=0,Math.abs(l)>Math.abs(p)?p=0:l=0);var d,f,_=Math.max(a-r,c),y=l/_,g=p/_,m=this.options.scale;this.options.direction===n.DIRECTION_X?(f=m*h,d=m*y,this._position+=f):this.options.direction===n.DIRECTION_Y?(f=m*u,d=m*g,this._position+=f):(f=[m*h,m*u],d=[m*y,m*g],this._position[0]+=f[0],this._position[1]+=f[1]);var v=this._payload;v.delta=f,v.velocity=d,v.position=this._position,v.clientX=t.x,v.clientY=t.y,v.count=t.count,v.touch=t.identifier,this._eventOutput.emit("update",v)}function r(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=t("./TouchTracker"),h=t("../core/EventHandler"),u=t("../core/OptionsManager");n.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},n.DIRECTION_X=0,n.DIRECTION_Y=1;var c=8;n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.getOptions=function(){return this.options},i.exports=n}),i("famous/views/Scrollview",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Drag","../physics/forces/Spring","../core/EventHandler","../core/OptionsManager","../core/ViewSequence","../views/Scroller","../utilities/Utility","../inputs/GenericSync","../inputs/ScrollSync","../inputs/TouchSync"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new w(this.options),this._scroller=new M(this.options),this.sync=new b(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:void 0!==this.options.preventDefault?this.options.preventDefault:this.options.direction!==x.Direction.Y}),this._physicsEngine=new y,this._particle=new g,this._physicsEngine.addBody(this._particle),this.spring=new v({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new m({forceFunction:m.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new m({forceFunction:m.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=z.NONE,this._onEdge=C.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new S,this._eventOutput=new S,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),S.setInputHandler(this,this._eventInput),S.setOutputHandler(this,this._eventOutput),a.call(this),t&&this.setOptions(t)}function s(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),u.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var e=-t.velocity,i=-t.delta;if(this._onEdge!==C.NONE&&t.slip&&(0>e&&this._onEdge===C.TOP||e>0&&this._onEdge===C.BOTTOM?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.getVelocity())&&s.call(this,t)),!this._earlyEnd){if(this._touchVelocity=e,t.slip){var n=this.options.speedLimit;-n>e?e=-n:e>n&&(e=n),this.setVelocity(e);var o=16*n;i>o?i=o:-o>i&&(i=-o)}this.setPosition(this.getPosition()+i),this._displacement+=i,this._springState===z.NONE&&f.call(this)}}function r(t){if(this._touchCount=t.count||0,!this._touchCount){u.call(this),this._onEdge!==C.NONE&&d.call(this,this._edgeSpringPosition,z.EDGE),h.call(this);var e=-t.velocity,i=this.options.speedLimit;t.slip&&(i*=this.options.edgeGrip),-i>e?e=-i:e>i&&(e=i),this.setVelocity(e),this._touchVelocity=0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",s),this._eventInput.on("update",o),this._eventInput.on("end",r),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(t){this._edgeSpringPosition=t.position,l.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(t){this._springState===z.NONE&&f.call(this),this._displacement=t.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==z.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function h(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function u(){this._springState=z.NONE,this._physicsEngine.detachAll()}function c(t){var e=this.options.direction,i=t.getSize();return i?i[e]:this._scroller.getSize()[e]}function l(t){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=t,this._touchCount||this._springState===z.EDGE||d.call(this,this._edgeSpringPosition,z.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(u.call(this),h.call(this))}function p(){if(!this._touchCount&&this._springState!==z.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var e=this.getPosition(),i=Math.abs(t)>this.options.pageSwitchSpeed,n=c.call(this,this._node),s=e>.5*n,o=t>0,r=0>t;this._needsPaginationCheck=!1,s&&!i||i&&o?this.goToNextPage():i&&r?this.goToPreviousPage():d.call(this,0,z.PAGE)}}}function d(t,e){var i;e===z.EDGE?(this._edgeSpringPosition=t,i={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):e===z.PAGE&&(this._pageSpringPosition=t,i={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(i),e&&!this._springState&&(u.call(this),this._springState=e,h.call(this)),this._springState=e}function f(){var t=0,e=this.getPosition();e+=(0>e?-.5:.5)>>0;for(var i=c.call(this,this._node),n=this._node.getNext();t+e>=i&&n;)t-=i,this._scroller.sequenceFrom(n),this._node=n,n=this._node.getNext(),i=c.call(this,this._node);for(var s,o=this._node.getPrevious();0>=t+e&&o;)s=c.call(this,o),this._scroller.sequenceFrom(o),this._node=o,t+=s,o=this._node.getPrevious();t&&_.call(this,t),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*i&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*i&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function _(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._totalShift+=t,this._springState===z.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===z.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),m=t("../physics/forces/Drag"),v=t("../physics/forces/Spring"),S=t("../core/EventHandler"),w=t("../core/OptionsManager"),O=t("../core/ViewSequence"),M=t("../views/Scroller"),x=t("../utilities/Utility"),b=t("../inputs/GenericSync"),D=t("../inputs/ScrollSync"),T=t("../inputs/TouchSync");b.register({scroll:D,touch:T});var z={NONE:0,EDGE:1,PAGE:2},C={TOP:-1,NONE:0,BOTTOM:1};n.DEFAULT_OPTIONS={direction:x.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},n.prototype.getCurrentIndex=function(){return this._node.index},n.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===C.TOP)return null;if(this.getPosition()>1&&this._springState===z.NONE)return d.call(this,0,z.PAGE),this._node;var t=this._node.getPrevious();if(t){var e=c.call(this,t);this._scroller.sequenceFrom(t),this._node=t,_.call(this,e),d.call(this,0,z.PAGE)}return t},n.prototype.goToNextPage=function(){if(!this._node||this._onEdge===C.BOTTOM)return null;var t=this._node.getNext();if(t){var e=c.call(this,this._node);this._scroller.sequenceFrom(t),this._node=t,_.call(this,-e),d.call(this,0,z.PAGE)}return t},n.prototype.goToPage=function(t){var e,i=this.getCurrentIndex();if(i>t)for(e=0;i-t>e;e++)this.goToPreviousPage();if(t>i)for(e=0;t-i>e;e++)this.goToNextPage()},n.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},n.prototype.getPosition=function(){return this._particle.getPosition1D()},n.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},n.prototype.getOffset=n.prototype.getPosition,n.prototype.setPosition=function(t){this._particle.setPosition1D(t)},n.prototype.setOffset=n.prototype.setPosition,n.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},n.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},n.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=x.Direction.X:"y"===t.direction&&(t.direction=x.Direction.Y)),t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(t),this._scroller.setOptions(t),void 0!==t.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==t.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==t.edgePeriod||void 0!==t.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(t.rails||void 0!==t.direction||void 0!==t.syncScale||t.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===x.Direction.X?b.DIRECTION_X:b.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},n.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new O({array:t,trackSize:!0})),this._node=t,this._scroller.sequenceFrom(t)},n.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},n.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&p.call(this),this._scroller.render()},i.exports=n}),i("famous/views/GridLayout",["require","exports","module","../core/Entity","../core/RenderNode","../core/Transform","../core/ViewSequence","../core/EventHandler","../core/Modifier","../core/OptionsManager","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,i){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this.optionsManager=new p(this.options),t&&this.setOptions(t),this.id=a.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new c,c.setOutputHandler(this,this._eventOutput)}function s(t,e,i){var n=[t[0],t[1]];n[0]-=this.options.gutterSize[0]*(e-1),n[1]-=this.options.gutterSize[1]*(i-1);for(var s,a=Math.round(n[1]/i),h=Math.round(n[0]/e),u=0,c=0,l=0;i>l;l++){s=0;for(var p=0;e>p;p++)void 0===this._modifiers[c]?o.call(this,c,[h,a],[s,u,0],1):r.call(this,c,[h,a],[s,u,0],1),c++,s+=h+this.options.gutterSize[0];u+=a+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[t[0],t[1]],this._activeCount=i*e,l=this._activeCount;l<this._modifiers.length;l++)r.call(this,l,[Math.round(h),Math.round(a)],[0,0],0);this._eventOutput.emit("reflow")}function o(t,e,i,n){var s={transform:new f(h.translate.apply(null,i)),opacity:new d(n),size:new d(e)},o=new l({transform:s.transform,opacity:s.opacity,size:s.size});this._states[t]=s,this._modifiers[t]=o}function r(t,e,i,n){var s=this._states[t],o=s.size,r=s.opacity,a=s.transform,h=this.options.transition;a.halt(),r.halt(),o.halt(),a.setTranslate(i,h),o.set(e,h),r.set(n,h)}var a=t("../core/Entity"),h=(t("../core/RenderNode"),t("../core/Transform")),u=t("../core/ViewSequence"),c=t("../core/EventHandler"),l=t("../core/Modifier"),p=t("../core/OptionsManager"),d=t("../transitions/Transitionable"),f=t("../transitions/TransitionableTransform");n.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},n.prototype.render=function(){return this.id},n.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new u(t)),this.sequence=t},n.prototype.getSize=function(){return this._contextSizeCache},n.prototype.commit=function(t){var e=t.transform,i=t.opacity,n=t.origin,o=t.size,r=this.options.dimensions[0],a=this.options.dimensions[1];(o[0]!==this._contextSizeCache[0]||o[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||a!==this._dimensionsCache[1])&&s.call(this,o,r,a);for(var u=this.sequence,c=[],l=0;u&&l<this._modifiers.length;){var p=u.get(),d=this._modifiers[l];l>=this._activeCount&&this._states[l].opacity.isActive()&&(this._modifiers.splice(l,1),this._states.splice(l,1)),p&&c.push(d.modify({origin:n,target:p.render()})),u=u.getNext(),l++}return o&&(e=h.moveThen([-o[0]*n[0],-o[1]*n[1],0],e)),{transform:e,opacity:i,size:o,target:c}},i.exports=n}),function(t){function n(t,e,i){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:i;default:throw new Error("Implement me")}}function s(t,e){return Te.call(t,e)}function o(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(t){we.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function a(t,e){var i=!0;return f(function(){return i&&(r(t),i=!1),e.apply(this,arguments)},e)}function h(t,e){mi[t]||(r(e),mi[t]=!0)}function u(t,e){return function(i){return g(t.call(this,i),e)}}function c(t,e){return function(i){return this.localeData().ordinal(t.call(this,i),e)}}function l(){}function p(t,e){e!==!1&&I(t),_(this,t),this._d=new Date(+t._d)}function d(t){var e=D(t),i=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||0,r=e.day||0,a=e.hour||0,h=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*h+36e5*a,this._days=+r+7*o,this._months=+s+3*n+12*i,this._data={},this._locale=we.localeData(),this._bubble()}function f(t,e){for(var i in e)s(e,i)&&(t[i]=e[i]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function _(t,e){var i,n,s;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Ne.length>0)for(i in Ne)n=Ne[i],s=e[n],"undefined"!=typeof s&&(t[n]=s);return t}function y(t){return 0>t?Math.ceil(t):Math.floor(t)}function g(t,e,i){for(var n=""+Math.abs(t),s=t>=0;n.length<e;)n="0"+n;return(s?i?"+":"":"-")+n}function m(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function v(t,e){var i;return e=G(e,t),t.isBefore(e)?i=m(t,e):(i=m(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function S(t,e){return function(i,n){var s,o;return null===n||isNaN(+n)||(h(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=i,i=n,n=o),i="string"==typeof i?+i:i,s=we.duration(i,n),w(this,s,t),this}}function w(t,e,i,n){var s=e._milliseconds,o=e._days,r=e._months;n=null==n?!0:n,s&&t._d.setTime(+t._d+s*i),o&&_e(t,"Date",fe(t,"Date")+o*i),r&&de(t,fe(t,"Month")+r*i),n&&we.updateOffset(t,o||r)}function O(t){return"[object Array]"===Object.prototype.toString.call(t)}function M(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function x(t,e,i){var n,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),r=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&z(t[n])!==z(e[n]))&&r++;return r+o}function b(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=li[t]||pi[e]||e}return t}function D(t){var e,i,n={};for(i in t)s(t,i)&&(e=b(i),e&&(n[e]=t[i]));return n}function T(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}we[e]=function(s,o){var r,a,h=we._locale[e],u=[];if("number"==typeof s&&(o=s,s=t),a=function(t){var e=we().utc().set(n,t);
return h.call(we._locale,e,s||"")},null!=o)return a(o);for(r=0;i>r;r++)u.push(a(r));return u}}function z(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function C(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function k(t,e,i){return ue(we([t,11,31+e-i]),e,i).week}function E(t){return P(t)?366:365}function P(t){return t%4===0&&t%100!==0||t%400===0}function I(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Ce]<0||t._a[Ce]>11?Ce:t._a[ke]<1||t._a[ke]>C(t._a[ze],t._a[Ce])?ke:t._a[Ee]<0||t._a[Ee]>24||24===t._a[Ee]&&(0!==t._a[Pe]||0!==t._a[Ie]||0!==t._a[Fe])?Ee:t._a[Pe]<0||t._a[Pe]>59?Pe:t._a[Ie]<0||t._a[Ie]>59?Ie:t._a[Fe]<0||t._a[Fe]>999?Fe:-1,t._pf._overflowDayOfYear&&(ze>e||e>ke)&&(e=ke),t._pf.overflow=e)}function F(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===t)),e._isValid}function Y(t){return t?t.toLowerCase().replace("_","-"):t}function N(t){for(var e,i,n,s,o=0;o<t.length;){for(s=Y(t[o]).split("-"),e=s.length,i=Y(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=L(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&x(s,i,!0)>=e-1)break;e--}o++}return null}function L(t){var i=null;if(!Ye[t]&&Le)try{i=we.locale(),e("./locale/"+t),we.locale(i)}catch(n){}return Ye[t]}function G(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(we.isMoment(t)||M(t)?+t:+we(t))-+i,i._d.setTime(+i._d+n),we.updateOffset(i,!1),i):we(t).local()}function A(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function H(t){var e,i,n=t.match(Ue);for(e=0,i=n.length;i>e;e++)n[e]=gi[n[e]]?gi[n[e]]:A(n[e]);return function(s){var o="";for(e=0;i>e;e++)o+=n[e]instanceof Function?n[e].call(s,t):n[e];return o}}function U(t,e){return t.isValid()?(e=q(e,t.localeData()),di[e]||(di[e]=H(e)),di[e](t)):t.localeData().invalidDate()}function q(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(qe.lastIndex=0;n>=0&&qe.test(t);)t=t.replace(qe,i),qe.lastIndex=0,n-=1;return t}function V(t,e){var i,n=e._strict;switch(t){case"Q":return Ke;case"DDDD":return ei;case"YYYY":case"GGGG":case"gggg":return n?ii:je;case"Y":case"G":case"g":return si;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ni:We;case"S":if(n)return Ke;case"SS":if(n)return ti;case"SSS":if(n)return ei;case"DDD":return Re;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ze;case"a":case"A":return e._locale._meridiemParse;case"x":return $e;case"X":return Je;case"Z":case"ZZ":return Xe;case"T":return Qe;case"SSSS":return Be;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?ti:Ve;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ve;case"Do":return n?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return i=new RegExp(J($(t.replace("\\","")),"i"))}}function R(t){t=t||"";var e=t.match(Xe)||[],i=e[e.length-1]||[],n=(i+"").match(ui)||["-",0,0],s=+(60*n[1])+z(n[2]);return"+"===n[0]?-s:s}function j(t,e,i){var n,s=i._a;switch(t){case"Q":null!=e&&(s[Ce]=3*(z(e)-1));break;case"M":case"MM":null!=e&&(s[Ce]=z(e)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(e,t,i._strict),null!=n?s[Ce]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[ke]=z(e));break;case"Do":null!=e&&(s[ke]=z(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=z(e));break;case"YY":s[ze]=we.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":s[ze]=z(e);break;case"a":case"A":i._isPm=i._locale.isPM(e);break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":s[Ee]=z(e);break;case"m":case"mm":s[Pe]=z(e);break;case"s":case"ss":s[Ie]=z(e);break;case"S":case"SS":case"SSS":case"SSSS":s[Fe]=z(1e3*("0."+e));break;case"x":i._d=new Date(z(e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=R(e);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(e),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=z(e));break;case"gg":case"GG":i._w=i._w||{},i._w[t]=we.parseTwoDigitYear(e)}}function W(t){var e,i,s,o,r,a,h;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(r=1,a=4,i=n(e.GG,t._a[ze],ue(we(),1,4).year),s=n(e.W,1),o=n(e.E,1)):(r=t._locale._week.dow,a=t._locale._week.doy,i=n(e.gg,t._a[ze],ue(we(),r,a).year),s=n(e.w,1),null!=e.d?(o=e.d,r>o&&++s):o=null!=e.e?e.e+r:r),h=ce(i,s,o,a,r),t._a[ze]=h.year,t._dayOfYear=h.dayOfYear}function B(t){var e,i,s,o,r=[];if(!t._d){for(s=X(t),t._w&&null==t._a[ke]&&null==t._a[Ce]&&W(t),t._dayOfYear&&(o=n(t._a[ze],s[ze]),t._dayOfYear>E(o)&&(t._pf._overflowDayOfYear=!0),i=oe(o,0,t._dayOfYear),t._a[Ce]=i.getUTCMonth(),t._a[ke]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=r[e]=s[e];for(;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Ee]&&0===t._a[Pe]&&0===t._a[Ie]&&0===t._a[Fe]&&(t._nextDay=!0,t._a[Ee]=0),t._d=(t._useUTC?oe:se).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm),t._nextDay&&(t._a[Ee]=24)}}function Z(t){var e;t._d||(e=D(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],B(t))}function X(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Q(e){if(e._f===we.ISO_8601)return void te(e);e._a=[],e._pf.empty=!0;var i,n,s,o,r,a=""+e._i,h=a.length,u=0;for(s=q(e._f,e._locale).match(Ue)||[],i=0;i<s.length;i++)o=s[i],n=(a.match(V(o,e))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&e._pf.unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),u+=n.length),gi[o]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(o),j(o,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=h-u,a.length>0&&e._pf.unusedInput.push(a),e._pf.bigHour===!0&&e._a[Ee]<=12&&(e._pf.bigHour=t),e._isPm&&e._a[Ee]<12&&(e._a[Ee]+=12),e._isPm===!1&&12===e._a[Ee]&&(e._a[Ee]=0),B(e),I(e)}function $(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s})}function J(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(t){var e,i,n,s,r;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(s=0;s<t._f.length;s++)r=0,e=_({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=o(),e._f=t._f[s],Q(e),F(e)&&(r+=e._pf.charsLeftOver,r+=10*e._pf.unusedTokens.length,e._pf.score=r,(null==n||n>r)&&(n=r,i=e));f(t,i||e)}function te(t){var e,i,n=t._i,s=oi.exec(n);if(s){for(t._pf.iso=!0,e=0,i=ai.length;i>e;e++)if(ai[e][1].exec(n)){t._f=ai[e][0]+(s[6]||" ");break}for(e=0,i=hi.length;i>e;e++)if(hi[e][1].exec(n)){t._f+=hi[e][0];break}n.match(Xe)&&(t._f+="Z"),Q(t)}else t._isValid=!1}function ee(t){te(t),t._isValid===!1&&(delete t._isValid,we.createFromInputFallback(t))}function ie(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function ne(e){var i,n=e._i;n===t?e._d=new Date:M(n)?e._d=new Date(+n):null!==(i=Ge.exec(n))?e._d=new Date(+i[1]):"string"==typeof n?ee(e):O(n)?(e._a=ie(n.slice(0),function(t){return parseInt(t,10)}),B(e)):"object"==typeof n?Z(e):"number"==typeof n?e._d=new Date(n):we.createFromInputFallback(e)}function se(t,e,i,n,s,o,r){var a=new Date(t,e,i,n,s,o,r);return 1970>t&&a.setFullYear(t),a}function oe(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function re(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function ae(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function he(t,e,i){var n=we.duration(t).abs(),s=De(n.as("s")),o=De(n.as("m")),r=De(n.as("h")),a=De(n.as("d")),h=De(n.as("M")),u=De(n.as("y")),c=s<fi.s&&["s",s]||1===o&&["m"]||o<fi.m&&["mm",o]||1===r&&["h"]||r<fi.h&&["hh",r]||1===a&&["d"]||a<fi.d&&["dd",a]||1===h&&["M"]||h<fi.M&&["MM",h]||1===u&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=i,ae.apply({},c)}function ue(t,e,i){var n,s=i-e,o=i-t.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=we(t).add(o,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ce(t,e,i,n,s){var o,r,a=oe(t,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:s,o=s-a+(a>n?7:0)-(s>a?7:0),r=7*(e-1)+(i-s)+o+1,{year:r>0?t:t-1,dayOfYear:r>0?r:E(t-1)+r}}function le(e){var i,n=e._i,s=e._f;return e._locale=e._locale||we.localeData(e._l),null===n||s===t&&""===n?we.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),we.isMoment(n)?new p(n,!0):(s?O(s)?K(e):Q(e):ne(e),i=new p(e),i._nextDay&&(i.add(1,"d"),i._nextDay=t),i))}function pe(t,e){var i,n;if(1===e.length&&O(e[0])&&(e=e[0]),!e.length)return we();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function de(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),C(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function fe(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function _e(t,e,i){return"Month"===e?de(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function ye(t,e){return function(i){return null!=i?(_e(this,t,i),we.updateOffset(this,e),this):fe(this,t)}}function ge(t){return 400*t/146097}function me(t){return 146097*t/400}function ve(t){we.duration.fn[t]=function(){return this._data[t]}}function Se(t){"undefined"==typeof ender&&(Oe=be.moment,be.moment=t?a("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",we):we)}for(var we,Oe,Me,xe="2.8.4",be="undefined"!=typeof global?global:this,De=Math.round,Te=Object.prototype.hasOwnProperty,ze=0,Ce=1,ke=2,Ee=3,Pe=4,Ie=5,Fe=6,Ye={},Ne=[],Le="undefined"!=typeof module&&module&&module.exports,Ge=/^\/?Date\((\-?\d+)/i,Ae=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,He=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ue=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,qe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ve=/\d\d?/,Re=/\d{1,3}/,je=/\d{1,4}/,We=/[+\-]?\d{1,6}/,Be=/\d+/,Ze=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xe=/Z|[\+\-]\d\d:?\d\d/gi,Qe=/T/i,$e=/[\+\-]?\d+/,Je=/[\+\-]?\d+(\.\d{1,3})?/,Ke=/\d/,ti=/\d\d/,ei=/\d{3}/,ii=/\d{4}/,ni=/[+-]?\d{6}/,si=/[+-]?\d+/,oi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ri="YYYY-MM-DDTHH:mm:ssZ",ai=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],hi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ui=/([\+\-]|\d\d)/gi,ci=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),li={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},pi={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},di={},fi={s:45,m:45,h:22,d:26,M:11},_i="DDD w W M D d".split(" "),yi="M D H h m s w W".split(" "),gi={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return g(this.year()%100,2)},YYYY:function(){return g(this.year(),4)},YYYYY:function(){return g(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+g(Math.abs(t),6)},gg:function(){return g(this.weekYear()%100,2)},gggg:function(){return g(this.weekYear(),4)},ggggg:function(){return g(this.weekYear(),5)},GG:function(){return g(this.isoWeekYear()%100,2)},GGGG:function(){return g(this.isoWeekYear(),4)},GGGGG:function(){return g(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return z(this.milliseconds()/100)},SS:function(){return g(z(this.milliseconds()/10),2)},SSS:function(){return g(this.milliseconds(),3)},SSSS:function(){return g(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+g(z(t/60),2)+":"+g(z(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+g(z(t/60),2)+g(z(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},mi={},vi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];_i.length;)Me=_i.pop(),gi[Me+"o"]=c(gi[Me],Me);for(;yi.length;)Me=yi.pop(),gi[Me+Me]=u(gi[Me],2);gi.DDDD=u(gi.DDD,3),f(l.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,i){var n,s,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(s=we.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=we([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.apply(e,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ue(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),we=function(e,i,n,s){var r;return"boolean"==typeof n&&(s=n,n=t),r={},r._isAMomentObject=!0,r._i=e,r._f=i,r._l=n,r._strict=s,r._isUTC=!1,r._pf=o(),le(r)},we.suppressDeprecationWarnings=!1,we.createFromInputFallback=a("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),we.min=function(){var t=[].slice.call(arguments,0);return pe("isBefore",t)},we.max=function(){var t=[].slice.call(arguments,0);return pe("isAfter",t)},we.utc=function(e,i,n,s){var r;return"boolean"==typeof n&&(s=n,n=t),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=n,r._i=e,r._f=i,r._strict=s,r._pf=o(),le(r).utc()},we.unix=function(t){return we(1e3*t)},we.duration=function(t,e){var i,n,o,r,a=t,h=null;return we.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(h=Ae.exec(t))?(i="-"===h[1]?-1:1,a={y:0,d:z(h[ke])*i,h:z(h[Ee])*i,m:z(h[Pe])*i,s:z(h[Ie])*i,ms:z(h[Fe])*i}):(h=He.exec(t))?(i="-"===h[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},a={y:o(h[2]),M:o(h[3]),d:o(h[4]),h:o(h[5]),m:o(h[6]),s:o(h[7]),w:o(h[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(r=v(we(a.from),we(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),n=new d(a),we.isDuration(t)&&s(t,"_locale")&&(n._locale=t._locale),n},we.version=xe,we.defaultFormat=ri,we.ISO_8601=function(){},we.momentProperties=Ne,we.updateOffset=function(){},we.relativeTimeThreshold=function(e,i){return fi[e]===t?!1:i===t?fi[e]:(fi[e]=i,!0)},we.lang=a("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return we.locale(t,e)}),we.locale=function(t,e){var i;return t&&(i="undefined"!=typeof e?we.defineLocale(t,e):we.localeData(t),i&&(we.duration._locale=we._locale=i)),we._locale._abbr},we.defineLocale=function(t,e){return null!==e?(e.abbr=t,Ye[t]||(Ye[t]=new l),Ye[t].set(e),we.locale(t),Ye[t]):(delete Ye[t],null)},we.langData=a("moment.langData is deprecated. Use moment.localeData instead.",function(t){return we.localeData(t)}),we.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return we._locale;if(!O(t)){if(e=L(t))return e;t=[t]}return N(t)},we.isMoment=function(t){return t instanceof p||null!=t&&s(t,"_isAMomentObject")},we.isDuration=function(t){return t instanceof d};for(Me=vi.length-1;Me>=0;--Me)T(vi[Me]);we.normalizeUnits=function(t){return b(t)},we.invalid=function(t){var e=we.utc(0/0);return null!=t?f(e._pf,t):e._pf.userInvalidated=!0,e},we.parseZone=function(){return we.apply(null,arguments).parseZone()},we.parseTwoDigitYear=function(t){return z(t)+(z(t)>68?1900:2e3)},f(we.fn=p.prototype,{clone:function(){return we(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=we(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():U(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):U(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&x(this._a,(this._isUTC?we.utc(this._a):we(this._a)).toArray())>0:!1},parsingFlags:function(){return f({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.zone(0,t)},local:function(t){return this._isUTC&&(this.zone(0,t),this._isUTC=!1,t&&this.add(this._dateTzOffset(),"m")),this},format:function(t){var e=U(this,t||we.defaultFormat);return this.localeData().postformat(e)},add:S(1,"add"),subtract:S(-1,"subtract"),diff:function(t,e,i){var n,s,o,r=G(t,this),a=6e4*(this.zone()-r.zone());return e=b(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+r.daysInMonth()),s=12*(this.year()-r.year())+(this.month()-r.month()),o=this-we(this).startOf("month")-(r-we(r).startOf("month")),o-=6e4*(this.zone()-we(this).startOf("month").zone()-(r.zone()-we(r).startOf("month").zone())),s+=o/n,"year"===e&&(s/=12)):(n=this-r,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-a)/864e5:"week"===e?(n-a)/6048e5:n),i?s:y(s)},from:function(t,e){return we.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(we(),t)},calendar:function(t){var e=t||we(),i=G(e,this).startOf("day"),n=this.diff(i,"days",!0),s=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this,we(e)))},isLeapYear:function(){return P(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=re(t,this.localeData()),this.add(t-e,"d")):e},month:ye("Month",!0),startOf:function(t){switch(t=b(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=b(e),e===t||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,e){var i;return e=b("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=we.isMoment(t)?t:we(t),+this>+t):(i=we.isMoment(t)?+t:+we(t),i<+this.clone().startOf(e))},isBefore:function(t,e){var i;return e=b("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=we.isMoment(t)?t:we(t),+t>+this):(i=we.isMoment(t)?+t:+we(t),+this.clone().endOf(e)<i)},isSame:function(t,e){var i;return e=b(e||"millisecond"),"millisecond"===e?(t=we.isMoment(t)?t:we(t),+this===+t):(i=+we(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))},min:a("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=we.apply(null,arguments),this>t?this:t}),max:a("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=we.apply(null,arguments),t>this?this:t}),zone:function(t,e){var i,n=this._offset||0;return null==t?this._isUTC?n:this._dateTzOffset():("string"==typeof t&&(t=R(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(i=this._dateTzOffset()),this._offset=t,this._isUTC=!0,null!=i&&this.subtract(i,"m"),n!==t&&(!e||this._changeInProgress?w(this,we.duration(n-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,we.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?we(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return C(this.year(),this.month())},dayOfYear:function(t){var e=De((we(this).startOf("day")-we(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ue(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ue(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ue(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return k(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return k(this.year(),t.dow,t.doy)},get:function(t){return t=b(t),this[t]()},set:function(t,e){return t=b(t),"function"==typeof this[t]&&this[t](e),this},locale:function(e){var i;return e===t?this._locale._abbr:(i=we.localeData(e),null!=i&&(this._locale=i),this)},lang:a("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),we.fn.millisecond=we.fn.milliseconds=ye("Milliseconds",!1),we.fn.second=we.fn.seconds=ye("Seconds",!1),we.fn.minute=we.fn.minutes=ye("Minutes",!1),we.fn.hour=we.fn.hours=ye("Hours",!0),we.fn.date=ye("Date",!0),we.fn.dates=a("dates accessor is deprecated. Use date instead.",ye("Date",!0)),we.fn.year=ye("FullYear",!0),we.fn.years=a("years accessor is deprecated. Use year instead.",ye("FullYear",!0)),we.fn.days=we.fn.day,we.fn.months=we.fn.month,we.fn.weeks=we.fn.week,we.fn.isoWeeks=we.fn.isoWeek,we.fn.quarters=we.fn.quarter,we.fn.toJSON=we.fn.toISOString,f(we.duration.fn=d.prototype,{_bubble:function(){var t,e,i,n=this._milliseconds,s=this._days,o=this._months,r=this._data,a=0;r.milliseconds=n%1e3,t=y(n/1e3),r.seconds=t%60,e=y(t/60),r.minutes=e%60,i=y(e/60),r.hours=i%24,s+=y(i/24),a=y(ge(s)),s-=y(me(a)),o+=y(s/30),s%=30,a+=y(o/12),o%=12,r.days=s,r.months=o,r.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return y(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*z(this._months/12)},humanize:function(t){var e=he(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var i=we.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=we.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=b(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,i;if(t=b(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,i=this._months+12*ge(e),"month"===t?i:i/12;switch(e=this._days+Math.round(me(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:we.fn.lang,locale:we.fn.locale,toIsoString:a("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||s||o?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale}}),we.duration.fn.toString=we.duration.fn.toISOString;for(Me in ci)s(ci,Me)&&ve(Me.toLowerCase());we.duration.fn.asMilliseconds=function(){return this.as("ms")},we.duration.fn.asSeconds=function(){return this.as("s")},we.duration.fn.asMinutes=function(){return this.as("m")},we.duration.fn.asHours=function(){return this.as("h")},we.duration.fn.asDays=function(){return this.as("d")},we.duration.fn.asWeeks=function(){return this.as("weeks")},we.duration.fn.asMonths=function(){return this.as("M")},we.duration.fn.asYears=function(){return this.as("y")},we.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===z(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),Le?module.exports=we:"function"==typeof i&&i.amd?(i("moment",["require","exports","module"],function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(be.moment=Oe),we}),Se(!0)):Se()}.call(this),i("MomentSurface",["require","exports","module","famous/core/Surface","moment"],function(t,e,i){function n(){this.moment=void 0,s.apply(this,arguments)}{var s=t("famous/core/Surface");t("moment")}n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.setMoment=function(t){this.moment=t},n.prototype.getMoment=function(){return this.moment},n.prototype.selected=function(){this.removeClass("unselected"),this.addClass("selected")},n.prototype.selectedRound=function(){this.removeClass("unselected"),this.addClass("selectedDay")},n.prototype.unselected=function(){this.removeClass("selectedDay"),this.removeClass("selected"),this.addClass("unselected")},i.exports=n}),i("ScrollviewGoto",["require","exports","module","famous/views/Scrollview","famous/core/ViewSequence"],function(t){var e=t("famous/views/Scrollview"),i=t("famous/core/ViewSequence"),n=0;e.prototype.getIndex=function(){return this._node.getIndex()},e.prototype.goToIndex=function(t,e,s){if(t!=this.getIndex()){var o=this._node._,r=new i({_:o,index:t-0});void 0===e&&(e=n),void 0===s&&(s=e>0?this._node.getSize()[this.options.direction]:0),s=-1*s,t<this.getIndex()&&(e=-1*e,s=-1*s),this.sequenceFrom(r),this.setPosition(s),this.setVelocity(e)}},e.prototype.goToFirst=function(t,e){this.goToIndex(this._node._.firstIndex,t,e)},e.prototype.goToLast=function(t,e){var i=this._node._,n=i.firstIndex+i.array.length-1;this.goToIndex(n,e,t)}}),i("main",["require","exports","module","famous/core/Engine","famous/core/Modifier","famous/core/Transform","famous/core/Surface","famous/surfaces/ContainerSurface","famous/views/Scrollview","famous/views/GridLayout","famous/core/EventHandler","moment","MomentSurface","ScrollviewGoto"],function(t){function e(t){var e,i=(Number(u().format("M")),Math.abs(t)),r=0,l=0,p=0;
0>t?(e=u().subtract(i,"months"),l=Number(e.format("M"))-1,p=Number(e.format("YYYY"))):(e=u().add(i,"months"),l=Number(e.format("M"))-1,p=Number(e.format("YYYY")));var r=Number(u([p,l]).format("d")),d=7,g=new a({dimensions:[7,d]}),m=(new h,[]);g.sequenceFrom(m);for(var v=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S=u([p,l]).daysInMonth(),w=0;S+r+7>w;w++){var O,M=0;7>w?O=v[w]:w>6&&7+r>w?O="":(M=w-(6+r),O=M);var x=_/d,b=new c({content:O,size:[x,x],classes:["unselected"],properties:{lineHeight:x+"px",textAlign:"center"}}),D=u([p,l,M]);b.setMoment(D);var T=u().format("D M YYYY");T==D.format("D M YYYY")&&(b.selectedRound(),U=b),w>6+r&&b.on("click",function(){U.unselected(),this.selectedRound(),U=this,B.trigger("update")});var z=new n({align:[.5,.5],origin:[.5,.5]}),C=new o({size:[void 0,void 0]});C.add(z).add(b),m.push(C)}var k=new o({size:[void 0,_],classes:["grid"]});k.add(g);var E=new n({align:[0,.2]}),P=new s({size:[void 0,y],content:u([p,l]).format("MMMM YYYY"),properties:{color:"black",textAlign:"center",lineHeight:y+"px"}}),I=new n({align:[0,0]}),F=new o({size:[void 0,y]});F.add(P);var Y=new o({size:[void 0,f]});return Y.add(I).add(F),Y.add(E).add(k),Y}var i=t("famous/core/Engine"),n=t("famous/core/Modifier"),s=(t("famous/core/Transform"),t("famous/core/Surface")),o=t("famous/surfaces/ContainerSurface"),r=t("famous/views/Scrollview"),a=t("famous/views/GridLayout"),h=t("famous/core/EventHandler"),u=t("moment"),c=t("MomentSurface"),l=(t("ScrollviewGoto"),i.createContext()),p=.5*window.innerWidth,d=.4*window.innerHeight,f=.5*window.innerHeight,_=.8*f,y=.2*f,g=.1*window.innerHeight,m=d/5,v=new n({align:[0,.5]}),S=new r({paginated:!0});S.on("pageChange",function(t){M.unselected();var e=S._node._.array[t.index+2];e.selected(),M=e,B.trigger("update")});var w=[];S.sequenceFrom(w);for(var O,M=new c,x=u().format("H"),b=28,D=0;b>D;D++)2>D||D>b-3?(O=new s({content:"",size:[void 0,m],properties:{lineHeight:m+"px",textAlign:"center"}}),O.pipe(S),w.push(O)):(O=new c({content:""+(D-2),size:[void 0,m],properties:{lineHeight:m+"px",textAlign:"center"},classes:["unselected"]}),O.on("click",function(){M.unselected(),this.selected(),M=this,S.goToIndex(M.content),B.trigger("update")}),D==x&&(O.selected(),M=O),O.pipe(S),w.push(O));var T=new o({size:[p,d],properties:{overflow:"hidden"},classes:["leftScroll"]});T.add(S),S.goToIndex(M.content),l.add(v).add(T);var z=new n({align:[.5,.5]}),C=new r({paginated:!0});C.on("pageChange",function(t){E.unselected();var e=C._node._.array[t.index+2];e.selected(),E=e,B.trigger("update")});var k=[];C.sequenceFrom(k);var E=new c,P=u().format("m"),I=Math.floor(P/10),F=10*I;if(P>F+5){var Y=Math.abs(P-(F+5)),N=Math.abs(P-(F+10));P=N>Y?F+5:F+10}else{var Y=Math.abs(P-F),N=Math.abs(P-(F+5));P=N>Y?F:F+5}for(var O,L=60,D=0;L>D;D++)if(2>D||D>L-3)O=new s({content:"",size:[void 0,m],properties:{lineHeight:m+"px",textAlign:"center"}}),O.pipe(C),k.push(O);else{var G=D-2;if(G%5==0){var A=10>G?"0":"";O=new c({content:A+G,size:[void 0,m],properties:{lineHeight:m+"px",textAlign:"center"},classes:["unselected"]}),O.on("click",function(){E.unselected(),this.selected(),E=this,C.goToIndex(E.content/5),B.trigger("update")}),G==P&&(O.selected(),E=O),O.pipe(C),k.push(O)}}var H=new o({size:[p,d],properties:{overflow:"hidden"}});H.add(C),C.goToIndex(E.content/5),l.add(z).add(H);var U=new c,q=new r({direction:0,paginated:!0}),V=[];q.sequenceFrom(V);for(var O,D=0;12>D;D++){var R=e(D);R.pipe(q),V.push(R)}l.add(q);var j=new s({size:[void 0,g],properties:{lineHeight:g+"px",textAlign:"center"},classes:["bottomButton"]}),W=new n({align:[0,.9]}),B=new h;B.on("update",function(){var t=U.getMoment(),e=t.format("dddd, MMMM Do - ")+M.content+":"+E.content+(M.content<13?"AM":"PM");j.setContent(e)}),j.pipe(B),l.add(W).add(j),B.trigger("update")}),e(["main"])}();